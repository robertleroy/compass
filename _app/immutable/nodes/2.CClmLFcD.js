import{t as h,a as v}from"../chunks/BaqBsVXD.js";import{i as w}from"../chunks/D6Q9veTw.js";import{p as x,t as E,a as b,s as n,m as y,b as k,c as l,r as d,g as D}from"../chunks/DsRcb7Gy.js";import{s as N}from"../chunks/DqyIA5kh.js";import{o as O}from"../chunks/CGCl-dIc.js";var P=h('<main class="svelte-xbkpxr"><h1>True North Compass</h1> <div class="compass svelte-xbkpxr"> </div></main>');function q(m,g){x(g,!1);let a=y("Waiting for data..."),r=0;async function p(t,e){try{const o=await fetch("https://www.ngdc.noaa.gov/geomag-web/calculators/calculateDeclination?lat1=35.547&lon1=-97.565&key=zNEw7&resultFormat=json");if(!o.ok)throw new Error("Failed to get magnetic declination");return(await o.json()).result[0].declination}catch(o){return console.error("Error fetching magnetic declination:",o),0}}function u(){function t(e){let c=(e.alpha+r+360)%360;n(a,`True North: ${c.toFixed(2)}Â°`)}typeof DeviceOrientationEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(e=>{e==="granted"?window.addEventListener("deviceorientation",t):n(a,"Permission denied")}).catch(e=>{n(a,`Error: ${e.message}`)}):window.addEventListener("deviceorientation",t)}O(()=>{if(!navigator.geolocation){n(a,"Geolocation not supported");return}navigator.geolocation.getCurrentPosition(async t=>{const{latitude:e,longitude:o}=t.coords;r=await p(),u()},t=>{n(a,`Geolocation error: ${t.message}`)},{enableHighAccuracy:!0})}),w();var i=P(),s=k(l(i),2),f=l(s,!0);d(s),d(i),E(()=>N(f,D(a))),v(m,i),b()}export{q as component};
