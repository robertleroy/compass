import{t as w,b as q}from"../chunks/BS_SkGc9.js";import{B as b,A as j,D as g,E as z,F as E,C as L,G as i,I as e,J as l,K as v,L as m}from"../chunks/xQmTJwd-.js";import{s as f}from"../chunks/B9nNSibo.js";import{o as $}from"../chunks/BhXFZiAX.js";function C(s,r){return s==null?null:String(s)}function D(s,r,y,n){var a=s.__style;if(b||a!==r){var t=C(r);(!b||t!==s.getAttribute("style"))&&(t==null?s.removeAttribute("style"):s.style.cssText=t),s.__style=r}return n}var F=w('<main class="svelte-1sjg2gt"><h2> </h2> <div class="shell svelte-1sjg2gt"><div class="compass svelte-1sjg2gt"></div></div> <div class="message"> </div> <div class="quaternion"> </div></main>');function J(s,r){j(r,!0);let y="Compass",n=g(""),a=g(15),t=g(z([]));$(()=>{if("AbsoluteOrientationSensor"in window)try{const o=new AbsoluteOrientationSensor({frequency:60});o.addEventListener("reading",()=>{i(t,o.quaternion,!0);const x=new DOMMatrixReadOnly([1-2*(e(t)[1]**2+e(t)[2]**2),2*(e(t)[0]*e(t)[1]-e(t)[2]*e(t)[3]),2*(e(t)[0]*e(t)[2]+e(t)[1]*e(t)[3]),0,2*(e(t)[0]*e(t)[1]+e(t)[2]*e(t)[3]),1-2*(e(t)[0]**2+e(t)[2]**2),2*(e(t)[1]*e(t)[2]-e(t)[0]*e(t)[3]),0,2*(e(t)[0]*e(t)[2]-e(t)[1]*e(t)[3]),2*(e(t)[1]*e(t)[2]+e(t)[0]*e(t)[3]),1-2*(e(t)[0]**2+e(t)[1]**2),0,0,0,0,1]).transformPoint({x:0,y:0,z:-1});i(a,Math.atan2(x.x,x.z)*(180/Math.PI))}),o.addEventListener("error",_=>{console.error("Sensor error:",_),i(n,"error")}),o.start()}catch(o){console.error("Failed to initialize AbsoluteOrientationSensor:",o),i(n,"AbsoluteOrientationSensor is not supported or permission denied.")}else i(n,"AbsoluteOrientationSensor is not supported on this device")});var d=F(),p=l(d),A=l(p);v(p);var u=m(p,2),M=l(u);v(u);var c=m(u,2),O=l(c,!0);v(c);var h=m(c,2),S=l(h,!0);v(h),v(d),E(()=>{f(A,`${y}: ${e(a)??""}`),D(M,`rotate: ${e(a)??""}(deg);`),f(O,e(n)),f(S,e(t))}),q(s,d),L()}export{J as component};
