import{t as I,a as O}from"../chunks/C06YIbpK.js";import{p as P,a as $,s as M,t as j,b as X,c as w,g as l,d as n,r as a,e as m}from"../chunks/fUOi5Kuw.js";import{s as o}from"../chunks/CAI48k2J.js";import{o as Y}from"../chunks/g_mddpEM.js";var k=I('<main class="svelte-1jefzxz"><h2> </h2> <div class="north"><h2 class="northX"> </h2> <div class="northY"> </div></div> <div class="message"> </div></main>');function Q(_,y){P(y,!0);let E="Compass",S="";$({frequency:1,referenceFrame:"device"});let g=M(0),s=M("");function q(t,e=0){return Math.round(t*Math.pow(10,e))/Math.pow(10,e)}function b(t,e){const[r,h,v,W]=t;let x=(Math.atan2(2*(W*v-r*h),1-2*(h*h+v*v))*(180/Math.PI)+360)%360;w(g,q(x),!0);const A=Math.atan2(e.y,e.x)*(180/Math.PI),C=(x+A+360)%360;return L(C)}function L(t){const e=["North","North-East","East","South-East","South","South-West","West","North-West","North"],r=Math.round(t/45)%8;return e[r]}Y(()=>{if("AbsoluteOrientationSensor"in window&&"Magnetometer"in window){const t=new AbsoluteOrientationSensor({frequency:60}),e=new Magnetometer({frequency:60});t.addEventListener("reading",()=>{t.quaternion&&e.x!==void 0&&(w(s,b(t.quaternion,e),!0),console.log(`Facing: ${l(s)}`))}),e.addEventListener("reading",()=>{}),t.addEventListener("error",r=>{console.error("Sensor error:",r.error)}),e.addEventListener("error",r=>{console.error("Magnetometer error:",r.error)}),t.start(),e.start()}});var i=k(),c=n(i),N=n(c);a(c);var d=m(c,2),u=n(d),z=n(u,!0);a(u);var p=m(u,2),D=n(p,!0);a(p),a(d);var f=m(d,2),F=n(f,!0);a(f),a(i),j(()=>{o(N,`${E}:`),o(z,l(s)),o(D,l(g)),o(F,S)}),O(_,i),X()}export{Q as component};
