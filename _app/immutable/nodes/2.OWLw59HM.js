import{t as Q,a as C}from"../chunks/BVDdzFVd.js";import{p as D,s as h,a as E,t as I,b as L,c as i,d as o,r,e as f,n as k,g}from"../chunks/BFEjTRN4.js";import{s as c}from"../chunks/Ch4auaXH.js";import{o as B}from"../chunks/DLyzZxiZ.js";var G=Q('<main class="svelte-1sjg2gt"><h2> </h2> <div class="north"><div class="northX"> </div> <div class="northY"> </div></div> <div class="message"> </div> <div class="quaternion"></div></main>');function P(O,S){D(S,!0);let M="Compass",u=h(""),$=15;E([]);let x=h(0),_=h(0);function b(t,e=0){return Math.round(t*Math.pow(10,e))/Math.pow(10,e)}function V(t){return[t[0],-t[1],-t[2],-t[3]]}function w(t,e){const a=t[0]*e[0]-t[1]*e[1]-t[2]*e[2]-t[3]*e[3],n=t[0]*e[1]+t[1]*e[0]+t[2]*e[3]-t[3]*e[2],m=t[0]*e[2]-t[1]*e[3]+t[2]*e[0]+t[3]*e[1],s=t[0]*e[3]+t[1]*e[2]-t[2]*e[1]+t[3]*e[0];return[a,n,m,s]}function X(t,e){const a=[0,e[0],e[1],e[2]],n=V(t),m=w(t,a),s=w(m,n);return[s[1],s[2],s[3]]}B(()=>{if("AbsoluteOrientationSensor"in window)try{const t=new AbsoluteOrientationSensor({frequency:1,referenceFrame:"screen"});t.addEventListener("reading",()=>{const e=t.quaternion,n=X(e,[0,1,0]);i(x,b(n[0],4),!0),i(_,b(n[1],4),!0)}),t.start()}catch(t){console.error("Failed to initialize AbsoluteOrientationSensor:",t),i(u,"AbsoluteOrientationSensor is not supported or permission denied.")}else i(u,"AbsoluteOrientationSensor is not supported on this device")});var d=G(),l=o(d),Y=o(l);r(l);var p=f(l,2),v=o(p),j=o(v);r(v);var y=f(v,2),z=o(y);r(y),r(p);var A=f(p,2),F=o(A,!0);r(A),k(2),r(d),I(()=>{c(Y,`${M}: ${$}`),c(j,`northX: ${g(x)??""}`),c(z,`northY: ${g(_)??""}`),c(F,g(u))}),C(O,d),L()}export{P as component};
