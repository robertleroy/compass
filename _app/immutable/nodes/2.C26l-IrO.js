import{t as q,a as y}from"../chunks/Bd0yObkR.js";import{i as z,j as l,k as G,t as E,l as X,m as s,n as r,o as a,q as n,u,v as Y}from"../chunks/BVfEjWgp.js";import{s as c}from"../chunks/isRUiBKv.js";import{i as B}from"../chunks/B7LBtJVs.js";import{o as J}from"../chunks/BNM25E4z.js";var K=q('<div class="message"> </div>'),Q=q('<main class="svelte-1hxcuu"><h2> </h2> <div class="north"><h2 class="northX"> </h2> <div class="northY"> </div></div> <h2 class="speedometer svelte-1hxcuu"> <sub>mph</sub></h2> <!></main>');function te(N,$){z($,!0);let i=l(null),A="Compass",d=l(""),_=l(0),v=l(""),b=l(0),F=G({frequency:1,referenceFrame:"device"});function w(e,t=0){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}function P(e){const[t,o,x,j]=e;let S=360-(Math.atan2(2*(j*x+t*o),1-2*(o*o+x*x))*(180/Math.PI)+360)%360;return s(_,w(S),!0),W(S)}function W(e){const t=["N","NE","E","SE","S","SW","W","NW","N"],o=Math.round(e/45)%8;return t[o]}function k(){"geolocation"in navigator?navigator.geolocation.watchPosition(e=>{if(e.coords.speed!==null){const t=e.coords.speed;s(b,w(t*2.23694),!0)}else s(d,"Speed data is unavailable.")},e=>{console.error("Error getting speed:",e.message)},{enableHighAccuracy:!0}):console.log("Geolocation is not supported by this browser.")}J(()=>{"AbsoluteOrientationSensor"in window?(s(i,new AbsoluteOrientationSensor(F),!0),r(i).addEventListener("reading",()=>{const e=r(i).quaternion;e&&(s(v,P(e),!0),console.log(`Facing: ${r(v)}`))}),r(i).addEventListener("error",e=>{console.error("Sensor error:",e.error)}),r(i).start()):s(d,"sensor not supported"),k()});var p=Q(),h=a(p),C=a(h);n(h);var m=u(h,2),g=a(m),D=a(g,!0);n(g);var M=u(g,2),H=a(M);n(M),n(m);var f=u(m,2),I=a(f);Y(),n(f);var L=u(f,2);{var O=e=>{var t=K(),o=a(t,!0);n(t),E(()=>c(o,r(d))),y(e,t)};B(L,e=>{r(d).length>0&&e(O)})}n(p),E(()=>{c(C,`${A}:`),c(D,r(v)),c(H,`${r(_)??""}Â°`),c(I,`${r(b)??""} `)}),y(N,p),X()}export{te as component};
