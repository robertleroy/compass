import{t as D,a as L}from"../chunks/C06YIbpK.js";import{p as O,a as $,s as x,t as j,b as I,c as _,g as u,d as r,r as a,e as p}from"../chunks/fUOi5Kuw.js";import{s as o}from"../chunks/CAI48k2J.js";import{o as P}from"../chunks/g_mddpEM.js";var X=D('<main class="svelte-1jefzxz"><h2> </h2> <div class="north"><h2 class="northX"> </h2> <div class="northY"> </div></div> <div class="message"> </div></main>');function J(w,M){O(M,!0);let S="Compass",y="",E=$({frequency:1,referenceFrame:"device"}),m=x(0),s=x("");function b(e,t=0){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}function N(e){const[t,n,v,C]=e;let g=(Math.atan2(2*(C*v-t*n),1-2*(n*n+v*v))*(180/Math.PI)+360)%360;return _(m,b(g),!0),q(g)}function q(e){const t=["N","NW","W","SW","S","SE","E","NE","N"],n=Math.round(e/45)%8;return t[n]}P(()=>{if("AbsoluteOrientationSensor"in window){const e=new AbsoluteOrientationSensor(E);e.addEventListener("reading",()=>{const t=e.quaternion;t&&(_(s,N(t),!0),console.log(`Facing: ${u(s)}`))}),e.addEventListener("error",t=>{console.error("Sensor error:",t.error)}),e.start()}});var i=X(),c=r(i),z=r(c);a(c);var d=p(c,2),l=r(d),F=r(l,!0);a(l);var h=p(l,2),W=r(h,!0);a(h),a(d);var f=p(d,2),A=r(f,!0);a(f),a(i),j(()=>{o(z,`${S}:`),o(F,u(s)),o(W,u(m)),o(A,y)}),L(w,i),I()}export{J as component};
