import{t as D,a as L}from"../chunks/C06YIbpK.js";import{p as O,s as x,a as z,t as I,b as P,c as _,g as u,d as r,r as a,e as p}from"../chunks/fUOi5Kuw.js";import{s as o}from"../chunks/CAI48k2J.js";import{o as X}from"../chunks/g_mddpEM.js";var Y=D('<main class="svelte-ftfmaa"><h2> </h2> <div class="north"><h2 class="northX"> </h2> <div class="northY"> </div></div> <div class="message"> </div></main>');function J(w,M){O(M,!0);let S="Compass",y="",m=x(0),s=x(""),E=z({frequency:1,referenceFrame:"device"});function b(e,t=0){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}function N(e){const[t,n,l,C]=e;let g=360-(Math.atan2(2*(C*l+t*n),1-2*(n*n+l*l))*(180/Math.PI)+360)%360;return _(m,b(g),!0),q(g)}function q(e){const t=["N","NE","E","SE","S","SW","W","NW","N"],n=Math.round(e/45)%8;return t[n]}X(()=>{if("AbsoluteOrientationSensor"in window){const e=new AbsoluteOrientationSensor(E);e.addEventListener("reading",()=>{const t=e.quaternion;t&&(_(s,N(t),!0),console.log(`Facing: ${u(s)}`))}),e.addEventListener("error",t=>{console.error("Sensor error:",t.error)}),e.start()}});var i=Y(),c=r(i),F=r(c);a(c);var d=p(c,2),v=r(d),W=r(v,!0);a(v);var h=p(v,2),$=r(h);a(h),a(d);var f=p(d,2),A=r(f,!0);a(f),a(i),I(()=>{o(F,`${S}:`),o(W,u(s)),o($,`${u(m)??""}Â°`),o(A,y)}),L(w,i),P()}export{J as component};
